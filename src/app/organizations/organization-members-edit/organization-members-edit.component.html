<div class="surface-card p-4 shadow-2 border-round mb-4">
  <div class="flex flex-row justify-content-between">
    <div class="text-3xl font-medium text-900 mb-3">
      {{ organizationMembers.metadata.namespace }}
      <span i18n>Members</span>
    </div>
    <a [routerLink]="['../..']" class="text-blue-500 hover:text-primary text-2xl cursor-pointer">
      <fa-icon [icon]="faClose"></fa-icon>
    </a>
  </div>
  <div class="border-top-1 surface-border">
    <form (submit)="save()" [formGroup]="form" class="flex flex-column" novalidate>
      <div class="mt-2">
        <p-message
          i18n-text
          severity="info"
          text="List all user names that should have access to this organization."></p-message>
      </div>
      <div class="grid mt-3">
        <label class="col-3" i18n>Name</label>
        <label class="col-8" i18n>Roles</label>
      </div>
      <div
        *ngFor="let control of this.userRefs.controls; let i = index; let last = last"
        class="grid formgrid mb-3"
        [formGroup]="$any(control)">
        <input formControlName="userName" class="col-3" pInputText tabindex="0" type="text" />
        <p-multiSelect
          formControlName="selectedRoles"
          class="col-8"
          [options]="allRoleNames"
          display="chip"
          defaultLabel="Select Roles"
          i18n-defaultLabel></p-multiSelect>

        <button
          (click)="removeFormControl(i)"
          *ngIf="!last && editPermission; else noButton"
          class="col-1 p-button-icon-only ml-3"
          i18n-title
          pButton
          pRipple
          tabindex="1"
          title="Remove"
          type="button">
          <fa-icon [icon]="faClose"></fa-icon>
        </button>
        <ng-template #noButton>
          <div *ngIf="editPermission" class="ml-3 w-3rem"></div>
        </ng-template>
      </div>

      <div *ngIf="editPermission">
        <button [disabled]="form.invalid" [loading]="saving" class="w-auto mt-3" pButton pRipple type="submit">
          <fa-icon [icon]="faSave" class="pr-2"></fa-icon>
          <span class="pr-2" i18n>Save</span>
        </button>
      </div>
    </form>
  </div>
</div>
